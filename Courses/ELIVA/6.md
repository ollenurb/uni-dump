# Image Enhancement (Dominio di Fourier)
Reiterando quello che è stato visto nel capitolo precendente, nel dominio di
Fourier vengono rappresentate le informazioni che riguardano l'intesità di
*pattern* presenti nell'immagine (ad esempio, $F(0,0)$ contiene il valore medio
dell'immagine). Quando facciamo image enhancement nel dominio di Fourier è
necessario sempre considerare dei filtri che siano *simmetrici* rispetto
all'origine. In caso contrario, quando si ricostruisce l'immagine elaborata si
otterrebbero valori complessi.

> **Importante**: come già detto, i filtri già visti che operano nel dominio dello
> spazio sono interpretabili anche nel dominio delle frequenze, eccetto però i
> filtri *non-lineari*. La trasformata di Fourier, infatti, permette di
> implementare solo filtri che sono lineari, per cui, il filtro *mediano* ad
> esempio non è implementabile nel dominio delle frequenze (così come tutti i
> filtri che coinvolgono ad esempio un ordinamento).

L'unica cosa che considereremo sarà lo *spettro* (modulo) della trasformata,
dimenticandoci in un certo senso della fase, che supporremo nulla in tutto il
dominio (come già discusso, rimane però di centrale importanza).

Possiamo riassumere il processamento nel dominio delle frequenze nei seguenti
passaggi:
$$
f_{elab}(x, y) = \mathscr{F}^{-1}[H(u, v)F(u, v)]
$$
da cui sono evidenti i singoli passaggi per effettuare l'elaborazione:

1. Trasformazione dell'immagine e del filtro tramite DFT;
2. Filtraggio delle frequenze per mezzo della moltiplicazione dell'immagine
   traformata e del filtro trasformato;
3. Ricostruzione dell'immagine elaborata tramite trafrormata inversa (IDFT).

## Esempi di Filtri
Vediamo ora alcuni filtri che possono essere applicati nel dominio delle
frequenze. Consideriamo ad esempio il seguente filtro
$$
H(u, v) = 
\begin{cases}
0 & u = v = 0\\
1 & \text{otherwise}
\end{cases}
$$
Tale filtro va a rimuovere tutte le componenti *continue*, cioè dove i valori
non cambiano tra loro e quindi sono uniformi essendo che hanno frequenza pari a
0.
Il risultato di questa applicazione è che l'immagine risultante sarà a media
nulla, cioè la media di tutti i valori di pixel sarà 0.

Altri filtri degni di nota sono i filtri *passa alto* e *passa basso*. Il primo
cancella del frequenze basse, per cui va ad accentuare essenzialmente i bordi
riducendo l'intensità nelle zone omogenee. L'effetto del secondo è invece
l'opposto, per cui si ottengono delle operazioni di *smoothing* dell'immagine.

Di solito, in realtà, per fare processamento di immagini si preferisce mantenere
il processing a livello spaziale. Quindi la fase di progettazione del filtro
avviene nel dominio delle frequenze, per poi fare una IDF del filtro e ottenere
la sua versione spaziale. Se suppponessimo di voler progettare un filtro passa
basso rappresentato da una funzione rettangolare, ci scontreremo però subito con
un problema: il *ringing*.
L'idealità di un filtro passa-basso/alto nella frequenza compromette l'idealità
nello spazio e viceversa. Questo può essere spiegato semplicemente guardando
l'antitrasformata di un filtro rappresentato da una funzione a rettangolo. Per
andare a rappresentare un cambio brusco (continuo) il filtro risultante è
infinito in dominio (funzione *sinc*). Perciò di solito si tende a "tagliarlo"
oltre una certa soglia per renderlo utilizzabile (di solito i filtri hanno
dimensioni molto più piccole delle immagini). Ciò che si ottiene, è evidente
andando a fare la trasformata di questo filtro ottenuto, che conterrà meno
sinusoidi e quindi conterrà una versione distorta della funzione a rettangolo
con diversi artefatti introdotti dalle interazioni delle cosinusoidi. Questo
perché avendo rimosso alcuni valori della funzione nel dominio dello spazio
(andando a tagliarla) si vanno effettivamente a rimuovere delle informazioni
cruciali (meno campioni) per ricostruire la funzione rettangolo nel dominio
delle frequenze. Come già detto, il fenomeno che introduce queste discontinuità
è detto *ringing*.

Siccome questo problema viene dato dalla *discontinuità* del filtro (cioè non è
derivabile nei punti in cui cambia di valore), si potrebbe evitare utilizzando
un'approssimazione differenziabile di tale filtro. Una possibile funzione per
implementare il filtro passa basso è la curva *Gaussiana*.
$$
H(u) = A e^{-u^2/2 \sigma^2}
$$
La cosa interessante della gaussiana è che è invariante rispetto alla
trasformata. L'unica cosa che cambia è la forma:

* Se $\sigma$ è grande, allora la trasformata sarà larga e l'antitrasformata
  stretta;
* Se $\sigma$ è piccolo, allora la trasformata sarà stretta e l'antitrasformata
  larga.

Se volessimo invece implementare un filtro passa basso possiamo invertire la
Gaussiana
$$
H(u) = 1 - A e^{-u^2/2 \sigma^2}
$$
